<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>SaaS Dashboard</title>
<style>
* { box-sizing: border-box; margin:0; padding:0; font-family: 'Segoe UI', sans-serif; }
body { background:#f4f6f9; min-height:100vh; display:flex; justify-content:center; align-items:center; }

/* AUTH CARD */
.card { background:white; padding: 40px 30px; border-radius:12px; box-shadow: 0 8px 30px rgba(0,0,0,0.1); width: 100%; max-width: 400px; text-align:center; }
h2 { margin-bottom: 25px; color:#333; font-weight:600; }
input { width:100%; padding:12px 15px; margin-bottom:15px; border-radius:8px; border:1px solid #ccc; font-size:14px; transition:0.2s; }
input:focus { border-color:#2563eb; outline:none; box-shadow:0 0 5px rgba(37,99,235,0.3); }
button { width:100%; padding:12px; border:none; border-radius:8px; background:#2563eb; color:white; font-weight:600; font-size:14px; cursor:pointer; transition:0.2s; }
button:hover { background:#1e4bb8; }
.switch-text { margin-top:12px; font-size:14px; color:#555; }
.switch-text a { color:#2563eb; text-decoration:none; font-weight:600; }
.switch-text a:hover { text-decoration:underline; }

.hidden { display:none !important; }

.toast { padding:12px; margin-top:15px; border-radius:8px; color:#fff; text-align:center; }
.toast.success { background:#16a34a; }
.toast.error { background:#ef4444; }

/* DASHBOARD LAYOUT */
#dashboardArea { display:flex; height:100vh; width:100%; }
.sidebar { width:250px; background:#2563eb; color:white; display:flex; flex-direction:column; justify-content:space-between; padding:20px; box-shadow: 2px 0 8px rgba(0,0,0,0.1); }
.sidebar h2 { color:white; text-align:left; margin-bottom:30px; }
.nav-item { padding:12px; border-radius:8px; margin-bottom:10px; cursor:pointer; }
.nav-item:hover { background:rgba(255,255,255,0.2); }
.logout { background:#ef4444; text-align:center; border-radius:8px; padding:12px; margin-top:10px; }
.logout:hover { background:#c9302c; }

.main { flex:1; display:flex; flex-direction:column; background:#f9fafc; }
.topbar { background:white; padding:15px 20px; display:flex; justify-content:space-between; align-items:center; flex-wrap: wrap; }
.topbar span { font-weight:600; color:#333; margin-bottom:5px; }
.content { padding:20px; display:grid; grid-template-columns: repeat(auto-fit,minmax(250px,1fr)); gap:20px; }
.card-box { background:white; padding:20px; border-radius:12px; box-shadow:0 4px 15px rgba(0,0,0,0.05); }
.card-box h3 { margin-bottom:10px; color:#2563eb; }
.card-box p { color:#555; font-size:14px; }

/* MOBILE RESPONSIVE */
@media (max-width: 768px) {
  #dashboardArea { flex-direction: column; }
  .sidebar {
    width: 100%; flex-direction: column; justify-content:flex-start; padding:10px; position:relative;
  }
  .sidebar h2 { margin-bottom:15px; }
  .nav-item { margin-bottom:8px; padding:8px 5px; font-size:14px; border-radius:8px; }
  .logout { position:absolute; bottom:10px; left:10px; right:10px; margin:0; padding:8px; font-size:14px; }
  .main { width:100%; margin-top:10px; }
  .topbar { flex-direction: column; align-items:flex-start; padding:10px; }
  .content { grid-template-columns:1fr; padding:10px; gap:15px; }
  .card { padding:30px 20px; }
}

@media (max-width: 480px) {
  .card { padding:20px 15px; }
  input, button { font-size:13px; padding:8px; }
  .topbar span { font-size:14px; }
  .nav-item { font-size:13px; padding:6px; }
  .logout { padding:6px; font-size:13px; }
}
</style>
</head>
<body>

<div class="card" id="authCard">
  <form id="loginForm">
    <h2>Login</h2>
    <input type="text" id="loginId" placeholder="Username or Email" required />
    <input type="password" id="loginPassword" placeholder="Password" required />
    <button type="submit">Login</button>
    <div class="switch-text">Don't have an account? <a href="#" id="toRegister">Sign up</a></div>
  </form>

  <form id="registerForm" class="hidden">
    <h2>Register</h2>
    <input type="text" id="regUsername" placeholder="Username" required />
    <input type="email" id="regEmail" placeholder="Email" required />
    <input type="password" id="regPassword" placeholder="Password" required />
    <button type="submit">Register</button>
    <div class="switch-text">Already have an account? <a href="#" id="toLogin">Login</a></div>
  </form>
  <div id="toasts"></div>
</div>

<div id="dashboardArea" class="hidden">
  <div class="sidebar">
    <div>
      <h2>MyApp</h2>
      <div class="nav-item">üè† Home</div>
      <div class="nav-item">üë§ Profile</div>
      <div class="nav-item">‚öôÔ∏è Settings</div>
    </div>
    <div class="nav-item logout" id="logoutBtn">üö™ Logout</div>
  </div>

  <div class="main">
    <div class="topbar">
      <span>Welcome, <span id="whoami"></span></span>
      <span>üìÖ Today: <script>document.write(new Date().toLocaleDateString());</script></span>
    </div>
    <div class="content">
      <div class="card-box"><h3>üìä Analytics</h3><p>Track your app‚Äôs performance metrics here.</p></div>
      <div class="card-box"><h3>üìß Messages</h3><p>You have 5 new notifications.</p></div>
      <div class="card-box"><h3>üõ†Ô∏è Settings</h3><p>Update your account preferences and security.</p></div>
    </div>
  </div>
</div>

<script>
const loginForm = document.getElementById("loginForm");
const registerForm = document.getElementById("registerForm");
const dashboard = document.getElementById("dashboardArea");
const whoami = document.getElementById("whoami");
const toRegister = document.getElementById("toRegister");
const toLogin = document.getElementById("toLogin");
const authCard = document.getElementById("authCard");

function toast(msg,type="success"){
  const t=document.createElement("div");t.className=`toast ${type}`;t.textContent=msg;
  document.getElementById("toasts").appendChild(t);
  setTimeout(()=>t.remove(),3000);
}

function getUsers(){ return JSON.parse(localStorage.getItem("users")||"[]"); }
function saveUsers(list){ localStorage.setItem("users",JSON.stringify(list)); }
function findUserByLogin(id){ return getUsers().find(u=>u.username===id||u.email===id); }
function hashSimple(s){ let h=0; for(let i=0;i<s.length;i++){h=(h<<5)-h+s.charCodeAt(i);h|=0;} return "h"+Math.abs(h); }

function showAuth(){
  authCard.classList.remove("hidden"); authCard.style.display="block";
  loginForm.classList.remove("hidden"); registerForm.classList.add("hidden");
  dashboard.classList.add("hidden"); dashboard.style.display="none";
}

function showDashboard(user){
  authCard.classList.add("hidden"); authCard.style.display="none";
  dashboard.classList.remove("hidden"); dashboard.style.display="flex";
  whoami.textContent=user.username;
}

toRegister.addEventListener("click", e=>{ e.preventDefault(); loginForm.classList.add("hidden"); registerForm.classList.remove("hidden"); });
toLogin.addEventListener("click", e=>{ e.preventDefault(); registerForm.classList.add("hidden"); loginForm.classList.remove("hidden"); });

registerForm.addEventListener("submit", e=>{
  e.preventDefault();
  const username=document.getElementById("regUsername").value.trim();
  const email=document.getElementById("regEmail").value.trim();
  const password=document.getElementById("regPassword").value;
  if(getUsers().some(u=>u.username===username||u.email===email)){ toast("Username or email taken","error"); return; }
  const newUser={id:Date.now(),username,email,password:hashSimple(password)};
  const users=getUsers(); users.push(newUser); saveUsers(users);
  toast("Registered successfully! Please login.","success");
  registerForm.reset(); toLogin.click();
});

loginForm.addEventListener("submit", e=>{
  e.preventDefault();
  const id=document.getElementById("loginId").value.trim();
  const password=document.getElementById("loginPassword").value;
  const user=findUserByLogin(id);
  if(!user){ toast("User not found","error"); return; }
  if(user.password!==hashSimple(password)){ toast("Incorrect password","error"); return; }
  sessionStorage.setItem("authUser",JSON.stringify(user));
  showDashboard(user);
});

document.getElementById("logoutBtn").addEventListener("click", ()=>{
  sessionStorage.removeItem("authUser");
  showAuth(); loginForm.reset(); toast("Logged out","success");
});

document.addEventListener("DOMContentLoaded", ()=>{
  const auth=JSON.parse(sessionStorage.getItem("authUser")||"null");
  if(auth) showDashboard(auth); else showAuth();
});
</script>

</body>
</html>
